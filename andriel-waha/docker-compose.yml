version: "3.7"

services:
  app_proxy:
    environment:
      APP_HOST: andriel-waha_server_1
      APP_PORT: 3000

  server:
    # Use ARM-compatible image for Raspberry Pi and other ARM devices
    image: devlikeapro/waha:arm
    restart: on-failure
    user: "0:0"
    environment:
      # Dashboard credentials
      WAHA_DASHBOARD_ENABLED: "true"
      WAHA_DASHBOARD_USERNAME: "admin"
      WAHA_DASHBOARD_PASSWORD: 67d7204d98254a94942584c1f5ab4bd1
      # Swagger credentials
      WHATSAPP_SWAGGER_USERNAME: "admin"
      WHATSAPP_SWAGGER_PASSWORD: 67d7204d98254a94942584c1f5ab4bd1
      # API Key
      WAHA_API_KEY: 67d7204d98254a94942584c1f5ab4bd1
    volumes:
      - ${APP_DATA_DIR}/data/sessions:/app/.sessions
      - ${APP_DATA_DIR}/data/media:/app/.media
